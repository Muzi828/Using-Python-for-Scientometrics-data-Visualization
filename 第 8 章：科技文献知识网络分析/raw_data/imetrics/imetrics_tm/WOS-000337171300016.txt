This paper uses two large databases, one of given names and one of family names, to categorise the names of researchers from Italy, Sweden, the UK and the USA whose papers in astronomy and oncology were published in 2006-2007 and in 2011-2012 by sex (gender) and ethnicity or national origin. For all the countries, there were relatively many more females publishing papers in oncology than in astronomy, but their share of contributions was lower than the percentage of researchers. Sweden and the UK had much higher percentages of both other European and Rest of the World researchers than Italy did. US researchers with non-European names were categorised in six main country groups. The ones with the greatest presence were Chinese (mainly Mandarin) and South Asians (mainly Indians). The method could be adapted to investigate the progress of women in research in many other countries, and the role played by non-national researchers in their scientific output.